parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {function f(a){return a&&a.__esModule?{d:a.default}:{d:a}}function c(e,r){return k(e)||j(e,r)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function j(e,r){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var t=[],n=!0,a=!1,$=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(p){a=!0,$=p}finally{try{n||null==i.return||i.return()}finally{if(a)throw $}}return t}}function k(e){if(Array.isArray(e))return e}var l={};var m=self.crypto||self.msCrypto,n="QLUint8ARdomValuesObj0h6345-79BCrypgJzHKTNYDSMkXPZ_FfG1WcqvwxEI2";l=function(r){r=r||21;for(var $="",y=m.getRandomValues(new Uint8Array(r));r--;)$+=n[63&y[r]];return $};function o(r){return s(r)||q(r)||p()}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function q(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}function s(r){if(Array.isArray(r)){for(var t=0,e=new Array(r.length);t<r.length;t++)e[t]=r[t];return e}}var r={};r={alg:"RSA-OAEP-256",e:"AQAB",ext:!0,key_ops:["encrypt"],kty:"RSA",n:"yBqwDPHEwT6JfGexwwRC4sXxxISkD4Wocj-4mq1lQH7xgC6hqB6YkdV40kdWo0ysfqh-uzde8RahgeHfBs46mAdwAZtF2Ia3zIWStyMWi669gKvtIl1xPblqktIFRlq4dfkOOgFyx7Rq8dPn9l4UU6vKpZSJQJxORBtvZGdP5Z3fXejcj5EYDVzQuKuKXcab-haAjJcc6q2zqAIcLANfqQenJmCmyy14KF27sT8hMFxzj5xkaHZjfST998qSKYi7EcsxXcj8NeCzOaMIEa7NXdHTqWw32wZLVQQdc_IxK42jzkjHjWoJLoNAHArz3eJf8EyDVKbel0LN7AugQRzfDlKVEIgFGXeMuVxLoawpkiVhMm1Gb1IAJDJVqNNN0GTYFqT_SFhNWo_MotWRX3R1ul4yyIVVpkcF8GkSKVfbErscn_jLRfNg6JnyYiaW6iVPjkiPTcn_dipoxdEySUgnvXLI7nehJnKaAhDzVEXhNaqtIbmEvdkHnm7n9FBHlM1ZThDiSqnsbl78XQISOLbDACSrpGgmH0PwOqGegS4TDUUNqltnHJ_bSCl6GACID1lNvTwb94YLhi63qR5T_oAxI-wqC3bqOaLXPkcywWItvYlDucbXG0kh9JHSl8pwikdsEVwwOlAPlA7wv9gxHZnRHxgwnP-KeRWZ_ewJDxqEkRE"};var u=new TextEncoder,e={name:"RSA-OAEP",hash:"SHA-256"},v=function(r){return window.btoa(String.fromCharCode.apply(String,o(new Uint8Array(r))))},t=function(r,t){return window.crypto.subtle.encrypt(e,r,u.encode(t)).then(v)},w=function(){var $K2Vj$$interop$default=f(r);return window.crypto.subtle.importKey("jwk",$K2Vj$$interop$default.d,e,!1,["encrypt"]).then(function(r){return t.bind(null,r)})};var g="2c4841590a7abcb280be5687bb872acb59318d99eae1704c8552fce86bfd1178",b=document.querySelector("nav"),d=document.querySelector("main > form"),h=d.querySelector("input[type=submit]"),a=document.createElement("button");a.innerText="Envoyer",a.style.width="100%",a.style.marginTop="2rem",a.style.height="3rem",b.appendChild(a),a.addEventListener("click",function(){return h.click()}),h.style.display="none";var x=function(e){return console.log("ENCRYPTING!",e),w().then(function(r){return r(JSON.stringify(e))})},y=function(e){return function(r){var t=c(r,2),n=t[0],a=t[1];return[n,-1===e.indexOf(n)?parseInt(a,10):a.trim()]}},z=function(e){var r={};return Array.from(new FormData(e)).map(y(Array.from(e.querySelectorAll("textarea")).map(function(e){return e.name}))).filter(function(e){return e[1]}).forEach(function(e){var t=c(e,2),n=t[0],a=t[1];if(!r[n])return r[n]=a;Array.isArray(r[n])||(r[n]=[r[n]]),r[n].push(a)}),r};d.addEventListener("submit",function(e){e.preventDefault();var r=z(e.target);x(r).then(function(e){var $iDyL$$interop$default=f(l);var r=$iDyL$$interop$default.d(8),t="https://www.jsonstore.io/".concat(g,"/keys/").concat(r),n="https://www.jsonstore.io/".concat(g,"/responses/").concat(r);return Promise.all([fetch(t,{headers:{"Content-type":"application/json"},method:"POST",body:Date.now()}),fetch(n,{headers:{"Content-type":"application/json"},method:"POST",body:JSON.stringify(e)})])}).then(function(e){var r=c(e,2),t=r[0],n=r[1];return Promise.all([t.json(),n.json()])}).then(function(e){var r=c(e,2),t=r[0],n=r[1];if(!t.ok||!n.ok)throw new Error("Problem saving response.");if(setTimeout(function(){return b.querySelector("div").className=""},1500),b.querySelector("#form-reset"))return b.querySelector("div").className="ping";var a=document.createElement("div");a.className="ping";var $=document.createElement("hr"),o=document.createElement("h3");o.innerText="R\xE9ponses transmises";var i=document.createElement("button");i.id="form-reset",i.innerText="Reset",i.style.width="100%",i.addEventListener("click",d.reset),a.appendChild($),a.appendChild(o),a.appendChild(i),b.appendChild(a)}).catch(function(e){var r=document.createElement("p");r.innerText="Error "+e.message,b.appendChild(r)})});return{"epB2":{}};});